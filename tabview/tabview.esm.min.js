import*as e from"react";import{PrimeReactContext as n,ariaLabel as t}from"primereact/api";import{ComponentBase as r,useHandleStyle as a}from"primereact/componentbase";import{useMountEffect as o,useUpdateEffect as l}from"primereact/hooks";import{ChevronLeftIcon as i}from"primereact/icons/chevronleft";import{ChevronRightIcon as c}from"primereact/icons/chevronright";import{TimesIcon as s}from"primereact/icons/times";import{Ripple as u}from"primereact/ripple";import{ObjectUtils as p,classNames as b,UniqueComponentId as d,mergeProps as f,DomHandler as v,IconUtils as m}from"primereact/utils";function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e){if(Array.isArray(e))return y(e)}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,n){if(e){if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,n):void 0}}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,n){if("object"!==C(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function P(e){var n=O(e,"string");return"symbol"===C(n)?n:String(n)}function S(e,n,t){return(n=P(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){if(Array.isArray(e))return e}function N(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,n){return E(e)||N(e,n)||w(e,n)||T()}function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=r.extend({defaultProps:{__TYPE:"TabView",id:null,activeIndex:0,className:null,onBeforeTabChange:null,onBeforeTabClose:null,onTabChange:null,onTabClose:null,panelContainerClassName:null,panelContainerStyle:null,renderActiveOnly:!0,scrollable:!1,style:null,children:void 0},css:{classes:{navcontent:"p-tabview-nav-content",nav:"p-tabview-nav",inkbar:"p-tabview-ink-bar",panelcontainer:function(e){return b("p-tabview-panels",e.props.panelContainerClassName)},prevbutton:"p-tabview-nav-prev p-tabview-nav-btn p-link",nextbutton:"p-tabview-nav-next p-tabview-nav-btn p-link",root:function(e){var n=e.props;return b("p-tabview p-component",{"p-tabview-scrollable":n.scrollable},n.className)},navcontainer:"p-tabview-nav-container",tab:{header:function(e){return b("p-unselectable-text",{"p-tabview-selected p-highlight":e.selected,"p-disabled":e.disabled},e.headerClassName,e._className)},headertitle:"p-tabview-title",headeraction:"p-tabview-nav-link",content:function(e){var n=e.props,t=e.selected,r=e.getTabProp,a=e.tab,o=e.isSelected,l=e.index;return!(0,e.shouldUseTab)(a,l)||n.renderActiveOnly&&!o(l)?void 0:b(r(a,"contentClassName"),r(a,"className"),"p-tabview-panel",{"p-hidden":!t})}}},styles:"\n@layer primereact {\n    .p-tabview-nav-container {\n        position: relative;\n    }\n    \n    .p-tabview-scrollable .p-tabview-nav-container {\n        overflow: hidden;\n    }\n    \n    .p-tabview-nav-content {\n        overflow-x: auto;\n        overflow-y: hidden;\n        scroll-behavior: smooth;\n        scrollbar-width: none;\n        overscroll-behavior: contain auto;\n        position: relative;\n    }\n    \n    .p-tabview-nav {\n        display: flex;\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        flex: 1 1 auto;\n    }\n    \n    .p-tabview-nav-link {\n        cursor: pointer;\n        user-select: none;\n        display: flex;\n        align-items: center;\n        position: relative;\n        text-decoration: none;\n        overflow: hidden;\n    }\n    \n    .p-tabview-ink-bar {\n        display: none;\n        z-index: 1;\n    }\n    \n    .p-tabview-nav-link:focus {\n        z-index: 1;\n    }\n    \n    .p-tabview-close {\n        z-index: 1;\n    }\n    \n    .p-tabview-title {\n        line-height: 1;\n        white-space: nowrap;\n    }\n    \n    .p-tabview-nav-btn {\n        position: absolute;\n        top: 0;\n        z-index: 2;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tabview-nav-prev {\n        left: 0;\n    }\n    \n    .p-tabview-nav-next {\n        right: 0;\n    }\n    \n    .p-tabview-nav-content::-webkit-scrollbar {\n        display: none;\n    }\n}\n",inlineStyles:{tab:{header:function(e){var n=e._style;return k(k({},e.headerStyle||{}),n||{})},content:function(e){var n=e.props,t=e.getTabProp,r=e.tab,a=e.isSelected,o=e.index;return!(0,e.shouldUseTab)(r,o)||n.renderActiveOnly&&!a(o)?void 0:k(k({},t(r,"contentStyle")||{}),t(r,"style")||{})}}}}}),D=r.extend({defaultProps:{__TYPE:"TabPanel",className:null,closable:!1,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,leftIcon:null,rightIcon:null,prevButton:null,nextButton:null,closeIcon:null,style:null,children:void 0},getCProp:function(e,n){return p.getComponentProp(e,n,D.defaultProps)},getCProps:function(e){return p.getComponentProps(e,D.defaultProps)},getCOtherProps:function(e){return p.getComponentDiffProps(e,D.defaultProps)}});function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=function(){},L=e.forwardRef((function(r,b){var y=e.useContext(n),C=_.getProps(r,y),O=j(e.useState(C.id),2),P=O[0],S=O[1],E=j(e.useState(!0),2),N=E[0],T=E[1],I=j(e.useState(!1),2),k=I[0],A=I[1],R=j(e.useState([]),2),L=R[0],W=R[1],J=j(e.useState(C.activeIndex),2),U=J[0],X=J[1],V=e.useRef(null),z=e.useRef(null),K=e.useRef(null),M=e.useRef(null),Y=e.useRef(null),H=e.useRef(null),$=e.useRef({}),q=C.onTabChange?C.activeIndex:U,F=e.Children.count(C.children),G={props:C,state:{id:P,isPrevButtonDisabled:N,isNextButtonDisabled:k,hiddenTabsState:L,activeIndex:U}},Q=_.setMetaData(B({},G)),Z=Q.ptm,ee=Q.ptmo,ne=Q.cx,te=Q.sx;a(_.css.styles,Q.isUnstyled,{name:"tabview"});var re=function(e,n,t){var r={props:e.props,parent:G,context:{index:t,count:F,first:0===t,last:t===F-1,active:t==U,disabled:oe(e,"disabled")}};return f(Z("tab.".concat(n),{tab:r}),Z("tabpanel.".concat(n),{tabpanel:r}),Z("tabpanel.".concat(n),r),ee(oe(e,"pt"),n,r))},ae=function(e){return e===q},oe=function(e,n){return D.getCProp(e,n)},le=function(e){return e&&p.isValidChild(e,"TabPanel")&&L.every((function(n){return n!==e.key}))},ie=function(e,n){e.preventDefault();var t,r=C.onBeforeTabClose,a=C.onTabClose,o=C.children[n].key;r&&!1===r({originalEvent:e,index:n})||(W([].concat(h(t=L)||g(t)||w(t)||x(),[o])),a&&a({originalEvent:e,index:n}))},ce=function(e,n,t){if(e&&e.preventDefault(),!oe(n,"disabled")){if(C.onBeforeTabChange&&!1===C.onBeforeTabChange({originalEvent:e,index:t}))return;C.onTabChange?C.onTabChange({originalEvent:e,index:t}):X(t)}ue(t)},se=function(e,n,t){"Enter"===e.key&&ce(e,n,t)},ue=function(e){var n=$.current["tab_".concat(e)];n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest"})},pe=function(e){var n,t,r,a;C.scrollable&&(t=(n=z.current).scrollLeft,r=n.scrollWidth,a=v.getWidth(z.current),T(0===t),A(t===r-a)),e.preventDefault()},be=function(){return[Y.current,H.current].reduce((function(e,n){return n?e+v.getWidth(n):e}),0)},de=function(){T(!0),A(!1),W([]),C.onTabChange?C.onTabChange({index:q}):X(C.activeIndex)};e.useEffect((function(){var e;e=$.current["tab_".concat(q)],M.current.style.width=v.getWidth(e)+"px",M.current.style.left=v.getOffset(e).left-v.getOffset(K.current).left+"px"})),o((function(){P||S(d())})),l((function(){if(p.isNotEmpty(L)){var n=(t=L[L.length-1],(r=e.Children.map(C.children,(function(e,n){if(le(e))return{tab:e,index:n}}))).find((function(e){var n=e.index;return!oe(e.tab,"disabled")&&n>=t}))||r.reverse().find((function(e){var n=e.index;return!oe(e.tab,"disabled")&&t>n})));n&&ce(null,n.tab,n.index)}var t,r}),[L]),l((function(){C.activeIndex!==U&&ue(C.activeIndex)}),[C.activeIndex]),e.useImperativeHandle(b,(function(){return{props:C,reset:de,getElement:function(){return V.current}}}));var fe,ve,me,ye,he,ge,we,xe,Ce,Oe=function(n,t){var r=ae(t),a=D.getCProps(n),o=a.headerStyle,l=a.headerClassName,i=a.style,c=a.className,b=a.disabled,d=a.leftIcon,v=a.rightIcon,y=a.header,h=a.headerTemplate,g=a.closable,w=a.closeIcon,x=P+"_header_"+t,O=P+"_content_"+t,S=b?null:0,E=d&&m.getJSXIcon(d,void 0,{props:C}),N=f({className:ne("tab.headertitle")},re(n,"headertitle",t)),T=e.createElement("span",N,y),j=v&&m.getJSXIcon(v,void 0,{props:C}),I="p-tabview-close",k=g?m.getJSXIcon(w||e.createElement(s,{className:I,onClick:function(e){return ie(e,t)}}),{className:I,onClick:function(e){return ie(e,t)}},{props:C}):null,_=f({id:x,role:"tab",className:ne("tab.headeraction"),tabIndex:S,"aria-controls":O,"aria-selected":r,onClick:function(e){return ce(e,n,t)},onKeyDown:function(e){return se(e,n,t)}},re(n,"headeraction",t)),A=e.createElement("a",_,E,T,j,k,e.createElement(u,null));h&&(A=p.getJSXElement(h,{className:"p-tabview-nav-link",titleClassName:"p-tabview-title",onClick:function(e){return ce(e,n,t)},onKeyDown:function(e){return se(e,n,t)},leftIconElement:E,titleElement:T,rightIconElement:j,element:A,props:C,index:t,selected:r,ariaControls:O}));var B=f({ref:function(e){return $.current["tab_".concat(t)]=e},className:ne("tab.header",{selected:r,disabled:b,headerClassName:l,_className:c}),style:te("tab.header",{headerStyle:o,_style:i}),role:"presentation"},re(n,"root",t),re(n,"header",t));return e.createElement("li",B,A)},Pe=f({id:P,ref:V,style:C.style,className:ne("root")},_.getOtherProps(C),Z("root")),Se=f({className:ne("navcontainer")},Z("navcontainer")),Ee=(fe=e.Children.map(C.children,(function(e,n){if(le(e))return Oe(e,n)})),ve=f({id:P,ref:z,className:ne("navcontent"),style:C.style,onScroll:pe},Z("navcontent")),me=f({ref:K,className:ne("nav"),role:"tablist"},Z("nav")),ye=f({ref:M,className:ne("inkbar")},Z("inkbar")),e.createElement("div",ve,e.createElement("ul",me,fe,e.createElement("li",ye)))),Ne=(he=f({className:ne("panelcontainer"),style:C.panelContainerStyle},Z("panelcontainer")),ge=e.Children.map(C.children,(function(n,t){if(le(n)&&(!C.renderActiveOnly||ae(t))){var r=ae(t),a=P+"_header_"+t,o=f({id:P+"_content_"+t,className:ne("tab.content",{props:C,selected:r,getTabProp:oe,tab:n,isSelected:ae,shouldUseTab:le,index:t}),style:te("tab.content",{props:C,getTabProp:oe,tab:n,isSelected:ae,shouldUseTab:le,index:t}),role:"tabpanel","aria-labelledby":a,"aria-hidden":!r},D.getCOtherProps(n),re(n,"root",t),re(n,"content",t));return e.createElement("div",o,C.renderActiveOnly?r&&oe(n,"children"):oe(n,"children"))}})),e.createElement("div",he,ge)),Te=(we=f(Z("previcon")),xe=m.getJSXIcon(C.prevButton||e.createElement(i,we),B({},we),{props:C}),Ce=f({ref:Y,type:"button",className:ne("prevbutton"),"aria-label":t("previousPageLabel"),onClick:function(e){return n=v.getWidth(z.current)-be(),void(z.current.scrollLeft=(t=z.current.scrollLeft-n)<=0?0:t);var n,t}},Z("prevbutton")),C.scrollable&&!N?e.createElement("button",Ce,xe,e.createElement(u,null)):null),je=function(){var n=f({"aria-hidden":"true"},Z("nexticon")),r=m.getJSXIcon(C.nextButton||e.createElement(c,n),B({},n),{props:C}),a=f({ref:H,type:"button",className:ne("nextbutton"),"aria-label":t("nextPageLabel"),onClick:function(e){return n=v.getWidth(z.current)-be(),void(z.current.scrollLeft=(t=z.current.scrollLeft+n)>=(r=z.current.scrollWidth-n)?r:t);var n,t,r}},Z("nextbutton"));if(C.scrollable&&!k)return e.createElement("button",a,r,e.createElement(u,null))}();return e.createElement("div",Pe,e.createElement("div",Se,Te,Ee,je),Ne)}));R.displayName="TabPanel",L.displayName="TabView";export{R as TabPanel,L as TabView};
