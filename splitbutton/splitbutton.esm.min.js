import*as t from"react";import e,{PrimeReactContext as n}from"primereact/api";import{Button as o}from"primereact/button";import{ComponentBase as r,useHandleStyle as i}from"primereact/componentbase";import{useDisplayOrder as l,useGlobalOnEscapeKey as u,ESC_KEY_HANDLING_PRIORITIES as a,useOverlayListener as p,useMountEffect as s,useUnmountEffect as c}from"primereact/hooks";import{ChevronDownIcon as m}from"primereact/icons/chevrondown";import{OverlayService as b}from"primereact/overlayservice";import{Tooltip as d}from"primereact/tooltip";import{classNames as f,mergeProps as y,IconUtils as v,ObjectUtils as O,UniqueComponentId as g,ZIndexUtils as h,DomHandler as j}from"primereact/utils";import{CSSTransition as E}from"primereact/csstransition";import{Portal as P}from"primereact/portal";function S(){return S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},S.apply(this,arguments)}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function w(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t){var e=w(t,"string");return"symbol"===N(e)?e:String(e)}function I(t,e,n){return(e=x(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t){if(Array.isArray(t))return t}function k(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,l,u=[],a=!0,p=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(o=i.call(n)).done)&&(u.push(o.value),u.length!==e);a=!0);}catch(t){p=!0,r=t}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw r}}return u}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function B(t,e){if(t){if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(t,e){return C(t)||k(t,e)||B(t,e)||D()}var _=r.extend({defaultProps:{__TYPE:"SplitButton",id:null,label:null,icon:null,loading:!1,loadingIcon:null,model:null,disabled:null,style:null,className:null,buttonClassName:null,menuStyle:null,menuClassName:null,menuButtonClassName:null,buttonProps:null,menuButtonProps:null,tabIndex:null,severity:null,rounded:!1,raised:!1,outlined:!1,text:!1,size:null,appendTo:null,tooltip:null,tooltipOptions:null,buttonTemplate:null,transitionOptions:null,dropdownIcon:null,onClick:null,onShow:null,onHide:null,children:void 0},css:{classes:{icon:"p-button-icon p-c",root:function(t){var e=t.props,n=t.size;return f("p-splitbutton p-component",I(I(I(I(I(I({"p-disabled":e.disabled,"p-button-loading-label-only":e.loading&&!e.icon&&e.label},"p-button-".concat(e.severity),e.severity),"p-button-raised",e.raised),"p-button-rounded",e.rounded),"p-button-text",e.text),"p-button-outlined",e.outlined),"p-button-".concat(n),n))},button:"p-splitbutton-defaultbutton",menuButton:"p-splitbutton-menubutton",menu:function(t){return f("p-menu p-menu-overlay p-component",t.subProps.menuClassName)},menuList:"p-menu-list p-reset",separator:"p-menu-separator",menuIcon:"p-menuitem-icon",menuLabel:"p-menuitem-text",anchor:function(t){return f("p-menuitem-link",t._className,{"p-disabled":t.disabled})},menuItem:"p-menuitem",transition:"p-connected-overlay"},styles:"\n@layer primereact {\n    .p-splitbutton {\n        display: inline-flex;\n        position: relative;\n    }\n\n    .p-splitbutton .p-splitbutton-defaultbutton,\n    .p-splitbutton.p-button-rounded > .p-splitbutton-defaultbutton.p-button,\n    .p-splitbutton.p-button-outlined > .p-splitbutton-defaultbutton.p-button,\n    .p-splitbutton.p-button-outlined > .p-splitbutton-defaultbutton.p-button-outlined.p-button:hover {\n        flex: 1 1 auto;\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n        border-right: 0 none;\n    }\n\n    .p-splitbutton-menubutton,\n    .p-splitbutton.p-button-rounded > .p-splitbutton-menubutton.p-button,\n    .p-splitbutton.p-button-outlined > .p-splitbutton-menubutton.p-button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n    }\n\n    .p-splitbutton .p-menu {\n        min-width: 100%;\n    }\n\n    .p-fluid .p-splitbutton  {\n        display: flex;\n    }\n}\n"}});function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=t.memo((function(e){var n,o=e.ptm,r=e.cx,i=function(t,n){return o(t,A({hostName:e.hostName},n))},l=function(t){e.menuitem.command&&e.menuitem.command({originalEvent:t,item:e.menuitem}),e.onItemClick&&e.onItemClick(t),t.preventDefault()},u=function(){if(!1===e.menuitem.visible)return null;var n=e.menuitem,o=n.icon,u=n.label,a=n.template,p=n.url,s=n.target,c=f("p-menuitem-link",n.className,{"p-disabled":n.disabled}),m=f("p-menuitem-icon",o),b=y({className:r("menuIcon")},i("menuIcon")),d=v.getJSXIcon(o,A({},b),{props:e.splitButtonProps}),g=y({className:r("menuLabel")},i("menuLabel")),h=u&&t.createElement("span",g,u),j=y({href:p||"#",role:"menuitem",className:r("anchor"),target:s,onClick:l,"aria-label":u},i("anchor")),E=t.createElement("a",j,d,h);a&&(E=O.getJSXElement(a,e.menuitem,{onClick:l,className:c,labelClassName:"p-menuitem-text",iconClassName:m,element:E,props:e}));var P=y({className:r("menuItem"),role:"none"},i("menuItem"));return t.createElement("li",P,E)};return e.menuitem.separator?(n=y({className:r("separator"),role:"separator"},i("separator")),t.createElement("li",n)):u()}));function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}R.displayName="SplitButtonItem";var M=t.forwardRef((function(e,n){var o,r,i,l=e.ptm,u=e.cx,a=function(t,n){return l(t,J({hostName:e.hostName},n))},p=(o=y({ref:n,className:u("menu",{subProps:e}),style:e.menuStyle,onClick:e.onClick},a("menu")),r=y({id:e.menuId,className:u("menuList"),role:"menu"},a("menuList")),i=y({classNames:u("transition"),in:e.in,timeout:{enter:120,exit:100},options:e.transitionOptions,unmountOnExit:!0,onEnter:e.onEnter,onEntered:e.onEntered,onExit:e.onExit,onExited:e.onExited},a("transition")),t.createElement(E,S({nodeRef:n},i),t.createElement("div",o,t.createElement("ul",r,e.children))));return t.createElement(P,{element:p,appendTo:e.appendTo})}));function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}M.displayName="SplitButtonPanel";var Z=t.memo(t.forwardRef((function(r,E){var P=t.useContext(n),N=_.getProps(r,P),w=z(t.useState(N.id),2),x=w[0],I=w[1],C=z(t.useState(!1),2),k=C[0],T=C[1],B=t.useRef(null),D=t.useRef(null),L=t.useRef(null),A={props:N,state:{id:x,overlayVisible:k}},H=_.setMetaData(A),J=H.ptm,X=H.cx;i(_.css.styles,H.isUnstyled,{name:"splitbutton"});var Z=l("split-button-tooltip",k);u({callback:function(){G()},when:k,priority:[a.SPLIT_BUTTON,Z]});var F=z(p({target:B,overlay:L,listener:function(t,e){e.valid&&G()},when:k}),2),V=F[0],Y=F[1],$=function(){G()},q=function(){T(!0)},G=function(){T(!1)},K=function(){j.alignOverlay(L.current,D.current.parentElement,N.appendTo||P&&P.appendTo||e.appendTo)};s((function(){x||I(g()),K()})),c((function(){h.clear(L.current)})),t.useImperativeHandle(E,(function(){return{props:N,show:q,hide:G,getElement:function(){return B.current}}}));if(!1===N.visible)return null;var Q=O.isNotEmpty(N.tooltip),W={large:"lg",small:"sm"}[N.size],tt=N.buttonTemplate?O.getJSXElement(N.buttonTemplate,N):null,et=N.model?N.model.map((function(e,n){return t.createElement(R,{hostName:"SplitButton",splitButtonProps:N,menuitem:e,key:n,onItemClick:$,ptm:J,cx:X})})):null,nt=x+"_menu",ot=y({ref:B,id:x,className:f(N.className,X("root",{size:W})),style:N.style},_.getOtherProps(N),J("root"));return t.createElement(t.Fragment,null,t.createElement("div",ot,t.createElement(o,S({ref:D,type:"button",className:f(N.buttonClassName,X("button")),icon:N.icon,loading:N.loading,loadingIcon:N.loadingIcon,severity:N.severity,label:N.label,raised:N.raised,onClick:N.onClick,disabled:N.disabled,tabIndex:N.tabIndex,size:N.size,outlined:N.outlined,text:N.text},N.buttonProps,{pt:J("button"),__parentMetadata:{parent:A},unstyled:N.unstyled}),tt),t.createElement(o,S({type:"button",className:f(N.menuButtonClassName,X("menuButton")),icon:function(){var e=y({className:X("icon")},J("icon")),n=v.getJSXIcon(N.dropdownIcon||t.createElement(m,e),U({},e),{props:N});return n},onClick:function(){k?G():q()},disabled:N.disabled,"aria-expanded":k,"aria-haspopup":"true","aria-controls":k?nt:null},N.menuButtonProps,{size:N.size,severity:N.severity,outlined:N.outlined,text:N.text,raised:N.raised,pt:J("menuButton"),__parentMetadata:{parent:A},unstyled:N.unstyled})),t.createElement(M,{hostName:"SplitButton",ref:L,appendTo:N.appendTo,menuId:nt,menuStyle:N.menuStyle,menuClassName:N.menuClassName,onClick:function(t){b.emit("overlay-click",{originalEvent:t,target:B.current})},in:k,onEnter:function(){h.set("overlay",L.current,P&&P.autoZIndex||e.autoZIndex,P&&P.zIndex.overlay||e.zIndex.overlay),j.addStyles(L.current,{position:"absolute",top:"0",left:"0"}),K()},onEntered:function(){V(),N.onShow&&N.onShow()},onExit:function(){Y()},onExited:function(){h.clear(L.current),N.onHide&&N.onHide()},transitionOptions:N.transitionOptions,ptm:J,cx:X},et)),Q&&t.createElement(d,S({target:B,content:N.tooltip},N.tooltipOptions,{pt:J("tooltip")})))})));Z.displayName="SplitButton";export{Z as SplitButton};
